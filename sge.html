<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>송가은</title>

    <!-- 부트스트랩 import -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <!-- jQuery import -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
</head>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Black+Han+Sans&family=Gaegu&family=Gamja+Flower&display=swap');

    * {
        font-family: "Gamja Flower", serif;

    }

    body {
        margin: 0px;
        padding: 0px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;

    }

    .header {
        background-color: rgb(171, 219, 253);
        height: 970px;
        width: 880px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }

    .you {
        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: center;
        position: relative;
        width: 880px;
        margin-top: 0%;
        margin-bottom: 15px;
    }

    .you > a {
        font-family: 'Black Han Sans', sans-serif;
        font-size: 28px;
        color: black;
        text-decoration: none;
        position: absolute;
        left: 0;
        padding-left: 15px;
    }

    .simpleIntro {
        background-image: url('images/sge_intro.png');
        background-size: 100%;
        height: 280px;
        width: 820px;
        display: flex;
        flex-direction: row;
    }

    .myface {
        margin: 17px 10px 10px 20px;
        height: 250px;
        max-width: 300px;
    }

    .myface>img {
        max-height: 100%;
        max-width: 100%;
    }

    .letme {
        height: 250px;
        max-width: 500px;
        margin-top: 20px;
        margin-left: 10px;
        margin-right: 10px;
        margin-bottom: 0px;
    }

    .letme > p {
        font-size: 20px;
        margin-left: 0;
        padding-left: 0;
        display: block;
    }

    .velogbtn {
        display: flex;
        align-items: center;
        margin-left: 150px;
    }

    .velogbtn > p {
        margin-right: 20px;
    }


    .mainIntro {
        margin-top: 0;
        /* background-color: green; */
        height: 600px;
        width: 820px;
        overflow: hidden;
    }

    .mainIntro > h1 {
        /* background-color: aqua; */
        background-image: url('images/sge_intro2.png');
        background-size: 100%;
        background-repeat: no-repeat;
        height: 60px;
        width: 240px;
        padding: 7px 0px 0px 25px;
        margin-top: 0;
        margin-bottom: 0;
    }

    .mainIntro > h3 {
        /* background-color: aqua; */
        background-image: url('images/sge_intro2.png');
        background-size: 100%;
        background-repeat: no-repeat;
        font-size: 22px;
        height: px;
        width: 190px;
        /* margin-bottom: 80px; */
        padding: 8px 0px 0px 15px;
        margin-top: 0;
        margin-bottom: 0;
    }

    .mainIntro>p {
        /* background-color: aqua; */
        background-image: url('images/sge_intro3.png');
        background-size: 100%;
        background-repeat: no-repeat;
        /* background-position: right; */
        font-size: 20px;
        height: 80px;
        width: 280px;
        /* margin-bottom: 80px; */
        padding: 8px 10px 0px 10px;
        position: relative;
        right: 0;
        margin-left: auto;
        margin-top: 0;
        margin-bottom: 0;
    }

    .sbtn {
        width: 800px;
        height: 50px;
        font-size: 40px;
        display: flex;
        justify-content: flex-end;
        margin-top: 15px;
        margin-left: 0px;
        border-radius: 10px;
        /* 둥근 모서리 추가 */
        box-shadow: none;
        /* 그림자 제거 */
        background-color: #f0f0f0;
        border: 1px solid #f0f0f0;
    }

    .edit-form {
        margin-top: 20px;
        background-color: #f9f9f9;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        /* display: none; */


        visibility: hidden;
        opacity: 0;
        position: relative;  /* 부모 요소와 상호작용하도록 변경 */
        z-index: 10;
    }

    .edit-form input,
    .edit-form textarea {
        width: 100%;
        padding: 10px;
        margin-bottom: 15px;
        border: 1px solid #dddddd;
        border-radius: 5px;
        font-size: 16px;
    }

    .edit-form input:focus,
    .edit-form textarea:focus {
        border-color: #6c757d;
        outline: none;
    }

    .edit-form button {
        background-color: #e7e7e7;
        color: rgb(0, 0, 0);
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
    }

    .edit-form button:hover {
        background-color: #e9f1e9;
    }

    .edit-form button:active {
        background-color: #edf3ed;
    }

    .edit-form.show {
        /* position: static; */
        opacity: 1;
        visibility: visible;
        transition: visibility 0s, opacity 0.5s ease;
        /* display: block; */
    }

    #t11 {
        cursor: pointer;
        transition: background-color 0.3s ease;
    }

    .hidden {
        display: none;
    }

    .show {
        display: block;
    }
</style>
<script type="module">
    // Firebase SDK 라이브러리 가져오기
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
    import { getFirestore } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
    import { collection, addDoc, query, orderBy, serverTimestamp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
    import { getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";


    // Firebase 구성 정보 설정
    const firebaseConfig = {
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        apiKey: "AIzaSyBy3eE88hLZPs0nbZsyh-xDwU3P4o_V0RY",
        authDomain: "sparta-8502a.firebaseapp.com",
        projectId: "sparta-8502a",
        storageBucket: "sparta-8502a.firebasestorage.app",
        messagingSenderId: "951025107455",
        appId: "1:951025107455:web:27123fc896a1e0df7367ca",
        measurementId: "G-TZR3YGP3Y5"
    };


    // Firebase 인스턴스 초기화
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    let t_idx = 0;

    $('#showbtn').click(function () {
        let elements = $('.hidden');

        if (t_idx < elements.length) {
            $(elements[t_idx]).addClass('show');
            $(this).insertAfter($(elements[t_idx]));
            $(elements[t_idx]).get(0).scrollIntoView({
                behavior: "smooth",
                block: "start"
            });
            t_idx++;
            console.log(t_idx);
            // 새로 보이는 #t11에 클릭 이벤트
            if ($(elements[t_idx - 1]).attr('id') === 't11') {
                console.log('rkdms')
                initButton();
            }
        }
    });

    function initButton() {
        $("#t11").on("click", function () {
            $('.edit-form').toggleClass("show");
        });
    }

    // 저장 버튼 클릭 시 Firebase에 데이터 추가
    $("#saveBtn").click(async function () {
        const title = $('#nameTitle').val();
        const comment = $('#comment').val();

        try {
            const docRef = await addDoc(collection(db, "gaeunlove"), {
                'title': title,
                'comment': comment,
                'timestamp': new Date()

            });
            console.log(title, comment)
            alert("비밀메시지 전송 완료!");
            $('.edit-form').toggle();
        } catch (e) {
            console.error("Error adding document: ", e);
        }
    });


</script>

<body id="pageTop">
    <div class="header">
        <div class="you">
            <a href="team_page.html">&lt;</a>
            <h1>스파르타</h1>
        </div>
        <div id="main">
            <div class="simpleIntro" id="t1">
                <div class="myface">
                    <img style="border-radius: 5px" src="images/sge.JPG">
                </div>
                <div class="letme">
                    <h1><b>👽 송가은 👽</b></h1>
                    <p>둘둘1나 페이지에서 메인페이지와 개인 소개 페이지 제작했습니다.
                        <br>🔥저와 친해지고 싶으신 분을 위한 꿀팁🔥
                        <br>애니, 드라마, 영화, 웹툰같은 컨텐츠 시청과 음악듣기를 좋아해요!
                        <br>신세대에 뒤쳐지지 않기위해 항상 노력중이랍니다🤟
                    </p>
                    <div class="velogbtn">
                        <p><span style="background-color: rgb(253, 241, 171); font-size: 23px;"><b>잠깐❗여기 누르고 가YO
                                    👉</b></span></p>
                        <a href="https://velog.io/@sge1128/posts"><img src="images/topbtn.png"
                                style="width:50px; height:50px; border-radius:20px; "></a>
                    </div>
                </div>
            </div>

            <div class="mainIntro">
                <button class="sbtn" id="showbtn">⬆️</button>
                <h1 id="t2" class="hidden">Who is 가은❓</h1>
                <h3 id="t3" class="hidden">MBTI가 뭐야??</h3>
                <p id="t4" class="hidden">INTP입니다!</p>
                <h3 id="t5" class="hidden">장점 말해줘!</h3>
                <p id="t6" class="hidden">피드백 수용성이 좋아요!
                    <br>지용성 아님🙅‍♀️🙅‍♀️
                </p>
                <h3 id="t7" class="hidden">협업 스타일은 어때?</h3>
                <p id="t8" class="hidden">최대한 소통!
                    <br> 그래야 진행상황 파악하기 좋아요
                </p>
                <h3 id="t9" class="hidden">마지막 인사 부탁해!</h3>
                <p id="t10" class="hidden">7월까지 다같이 열심히 해봐요~
                    <br>잘부탁드립니다!!
                </p>
                <p id="t11" class="hidden" style="cursor: pointer;">저에게 비밀메시지를
                    보내고 싶으면 여기를 누르세요!</p>
                <div class="edit-form">
                    <input type="text" id="nameTitle" class="edit-title" placeholder="제목을 입력하세요" />
                    <textarea id="comment" class="edit-comment" placeholder="내용을 입력하세요!"></textarea>
                    <button id="saveBtn">보내기</button>
                </div>
            </div>
        </div>
    </div>
    <div class="topbtn" style="position: fixed; bottom: 20px; right: 20px;">
        <a href="#pageTop"><img src="images/topbtn.png" style="width:60px; height:60px; border-radius:20px"></a>
    </div>
</body>

</html>